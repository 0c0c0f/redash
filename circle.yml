machine:
  node:
    version:
      0.10.22
  python:
    version:
      2.7.3
dependencies:
  pre:
    - make deps
    - pip install requests coverage nose coveralls
    - pip install -r requirements.txt
    - cp redash/settings_example.py redash/settings.py
  cache_directories:
    - rd_ui/node_modules/
    - rd_ui/app/bower_components/
test:
  override:
    - make test
  post:
    - coveralls
    - rm redash/settings.py
    - make pack 
deployment:
  github:
    branch: master
    commands:
      - make upload
